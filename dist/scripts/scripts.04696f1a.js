"use strict";angular.module("stpApp",["ngAnimate","ngAria","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","btford.markdown"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/description",{templateUrl:"views/description.html"}).when("/protocols",{templateUrl:"views/protocol.html"}).when("/schedule",{templateUrl:"views/schedule.html"}).otherwise({redirectTo:"/"})}]),angular.module("stpApp").controller("MainCtrl",["$scope",function(a){a.test="test"}]),angular.module("stpApp").directive("forceGraph",["d3Service",function(a){return{restrict:"E",template:"<div id='menu'></div>",link:function(){a.d3().then(function(a){var b=[{source:"concept",target:"form",type:"red"},{source:"concept",target:"material",type:"red"},{source:"form",target:"material",type:"red"},{source:"form",target:"concept",type:"red"},{source:"material",target:"concept",type:"red"},{source:"material",target:"form",type:"red"},{target:"lines of research",source:"concept",type:"dotted"},{target:"updates",source:"concept",type:"dotted"},{target:"productions",source:"concept",type:"dotted"},{target:"protocols",source:"form",type:"dotted"},{target:"schedule",source:"form",type:"dotted"},{target:"definition",source:"form",type:"dotted"},{target:"recordings",source:"material",type:"dotted"},{target:"presentations",source:"material",type:"dotted"},{target:"bibliography",source:"material",type:"dotted"}],c={},d=function(a){var b=a.target.x-a.source.x,c=a.target.y-a.source.y,d=Math.sqrt(b*b+c*c);return"M"+a.source.x+","+a.source.y+"A"+d+","+d+" 0 0,1 "+a.target.x+","+a.target.y},e=function(a){return"translate("+a.x+","+a.y+")"},f=function(){k.attr("d",d),l.attr("transform",e),m.attr("transform",e)};b.forEach(function(a){a.source=c[a.source]||(c[a.source]={name:a.source}),a.target=c[a.target]||(c[a.target]={name:a.target})});var g="1280",h="600",i=a.layout.force().nodes(a.values(c)).links(b).size([g,h]).linkDistance(160).charge(-1500).on("tick",f).start(),j=a.select("#menu").append("svg").attr("width",g).attr("height",h);j.append("defs").selectAll("marker").data(["dotted","red","solid"]).enter().append("marker").attr("id",function(a){return a}).attr("viewBox","0 -5 10 10").attr("refX",15).attr("refY",-1.5).attr("markerWidth",10).attr("markerHeight",10).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5");var k=j.append("g").selectAll("path").data(i.links()).enter().append("path").attr("class",function(a){return"link "+a.type}).attr("marker-end",function(a){return"url(#"+a.type+")"}),l=j.append("g").selectAll("circle").data(i.nodes()).enter().append("circle").attr("r",15).call(i.drag),m=j.append("g").selectAll("text").data(i.nodes()).enter().append("text").attr("x",25).attr("y",".35em").text(function(a){return a.name}).attr("class","nodeText")})}}}]),angular.module("stpApp").factory("d3Service",["$document","$q","$rootScope",function(a,b,c){function d(){c.$apply(function(){e.resolve(window.d3)})}var e=b.defer(),f=a[0].createElement("script");f.type="text/javascript",f.async=!0,f.src="http://d3js.org/d3.v3.min.js",f.onreadystatechange=function(){"complete"===this.readyState&&d()},f.onload=d;var g=a[0].getElementsByTagName("body")[0];return g.appendChild(f),{d3:function(){return e.promise}}}]);